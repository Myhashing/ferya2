(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[832],{58097:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/welcome",function(){return n(45019)}])},78152:function(t,e,n){"use strict";var r=n(35250),i=n(89598),s=n(89643),o=n(5769),a=n(48439),u=n(70079),c=n(30463),l=n(16811),h=n(55805);let d=t=>{let{children:e}=t,{query:n,isReady:d}=(0,a.useRouter)(),{error:m,error_description:p}=n,{logout:f,user:x}=(0,i.D3)();(0,u.useEffect)(()=>{x?c.av({id:x.sub,email:x.email}):c.av(null)},[x]);let g=(0,i.u3)(()=>(0,r.jsx)(r.Fragment,{children:e})),v=p&&p.includes("verify");if(!d)return null;let y=()=>{let t=(0,h.SV)();f({returnTo:"".concat(t,"?skipToLogin=true")})};return m?(0,r.jsx)(l.Z,{children:(0,r.jsxs)(s.kC,{direction:"column",gap:"6",children:[(0,r.jsxs)(s.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(s.xv,{textStyle:"subheading",color:"gray.300",children:v?"Welcome":"Something went wrong"}),(0,r.jsx)(s.X6,{size:"4",children:v?"Please verify your email":p})]}),v&&(0,r.jsx)(s.xv,{color:"gray.300",children:"Check your email and look for a message from the Hiro Platform. Follow the instructions to verify your email address."}),(0,r.jsx)(o.zx,{variant:"primary",onClick:y,children:"Log in again"})]})}):(0,r.jsx)(g,{})};e.Z=d},13821:function(t,e,n){"use strict";n.d(e,{_i:function(){return c},bK:function(){return u}});var r=n(89072),i=n(70079),s=n(36898),o=n(55805),a=n(2989);let u=()=>{let{data:t}=(0,s.j)(),e=(0,i.useMemo)(()=>{let e=r.Z.create({baseURL:"".concat((0,o.kG)(),"/v1"),headers:{Authorization:t?"Bearer ".concat(t):""}});return e.interceptors.request.use(e=>t?(e.headers.Authorization="Bearer ".concat(t),e):Promise.reject(Error("Auth token is undefined, request not sent")),t=>{Promise.reject(t)}),e},[t]);return e},c=async(t,e,n)=>{let r;let i={headers:new Headers({"Content-Type":"application/json",Accept:"application/json",Authorization:(null==n?void 0:n.authToken)?"Bearer ".concat(n.authToken):""}),...e};try{if(!(r=await fetch(t,i)).ok)return await Promise.reject(r)}catch(i){let r=401===i.status;if(!r&&!(null==n?void 0:n.dontLogError)){let n;if("function"==typeof i.json)try{let t=await i.json();n=JSON.stringify(t)}catch(t){n=i.statusText?"".concat(i.status," ").concat(i.statusText):i}else n=i.statusText?"".concat(i.status," ").concat(i.statusText):i;(0,a.H)(i,"Requesting: ".concat((null==e?void 0:e.method)||"GET"," ").concat(t),{errorDetails:n})}throw i}return r.json()},l=t=>async(e,n,r,i)=>{let s={method:t,...r,body:JSON.stringify(n)};return c(e,s,i)};l("POST"),l("PUT"),l("PATCH")},2989:function(t,e,n){"use strict";n.d(e,{H:function(){return s}});var r=n(95079),i=n(30463);function s(t,e,n){i.Tb(t,t=>(e&&t.setTransactionName(e),n&&t.setContext("app-context",n),t)),(0,r.eh)(t,e,n)}},16811:function(t,e,n){"use strict";var r=n(35250),i=n(89643);let s=t=>{let{children:e}=t;return(0,r.jsx)(i.kC,{className:"center-y",direction:"column",gap:"4",width:"80%",maxWidth:"448px",minWidth:"300px",bg:"gray.600",p:"8",borderRadius:"md",align:"center",mx:"auto",my:"auto",mt:"3",textAlign:"center",children:e})};e.Z=s},36898:function(t,e,n){"use strict";n.d(e,{j:function(){return u},r:function(){return c}});var r=n(70079),i=n(41718),s=n(89598),o=n(19965),a=n(22676);function u(){let{getAccessTokenSilently:t,user:e}=(0,s.D3)();return(0,o.a)(["authToken",null==e?void 0:e.sub],()=>t(),{...a.y,staleTime:0,enabled:!!e})}function c(){let{data:t}=u();(0,r.useEffect)(()=>{let e=i.Z.get("token");t&&!e&&i.Z.set("access_token",t,{expires:2,domain:"hiro.so",path:"/",secure:!0,sameSite:"Strict"})},[t])}},40484:function(t,e,n){"use strict";n.d(e,{M:function(){return l},y:function(){return c}});var r=n(19965),i=n(2912),s=n(54581),o=n(55805),a=n(13821),u=n(36898);function c(t){let{data:e}=(0,u.j)();return(0,r.a)(["emailOptIns",e],async()=>{let t;try{t=await (0,a._i)("".concat((0,o.kG)(),"/v1/email-opt-in"),{},{authToken:e,dontLogError:!0})}catch(e){var n;if(null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.includes("404"))t=null;else throw e}return t},{...t,retry:!1,enabled:!!e})}function l(t){let{data:e}=(0,u.j)(),n=(0,i.NL)();return(0,s.D)(t=>(0,a._i)("".concat((0,o.kG)(),"/v1/email-opt-in"),{method:"PUT",body:JSON.stringify(t)},{authToken:e}),{...t,onSuccess:(r,i,s)=>{var o;n.invalidateQueries(["emailOptIns",e]),null==t||null===(o=t.onSuccess)||void 0===o||o.call(t,r,i,s)}})}},47583:function(t,e,n){"use strict";n.d(e,{M:function(){return s}});var r=n(54581),i=n(13821);let s=(t,e)=>{let n=(0,i.bK)(),s=(0,r.D)({mutationFn:()=>n.post("/pod/create"),onSuccess:t,onError:e});return s}},45019:function(t,e,n){"use strict";n.r(e);var r=n(35250),i=n(89598),s=n(89643),o=n(5769),a=n(86046),u=n.n(a),c=n(72450),l=n.n(c),h=n(48439),d=n(70079),m=n(95079),p=n(78152),f=n(2989),x=n(70919),g=n(36898),v=n(40484),y=n(47583),b=n(12734);let j=()=>{let t=(0,h.useRouter)(),{user:e}=(0,i.D3)(),{analytics:n}=(0,m.IH)(),{data:a}=(0,g.j)(),[c,p]=(0,d.useState)(!1),[j,k]=(0,d.useState)(!0),[R,w]=(0,d.useState)(!1),[S,C]=(0,d.useState)(!1),M=(0,y.M)();(0,d.useEffect)(()=>{a&&M.mutate()},[a]);let{data:E,isFetched:O}=(0,v.y)(),{mutateAsync:T}=(0,v.M)({onError:t=>{(0,f.H)(t,"Upsert email opt in for user",{userId:e.sub,error:JSON.stringify(t)})}});(0,d.useEffect)(()=>{O&&!E&&T({email:e.email,optedIn:!1})},[O,E]),(0,d.useEffect)(()=>{p(!0),setTimeout(()=>{k(!1)},2700)},[]),(0,d.useEffect)(()=>{n.page({category:"Platform",name:"Welcome",properties:{user:e}})},[]);let _=async()=>{C(!0),await T({email:e.email,optedIn:!0}),n.track({event:"opt_in_emails",properties:{user:e}}),setTimeout(()=>{t.push("/projects")},1e3)},P=(0,d.useCallback)(()=>{n.track({event:"opt_out_emails",properties:{user:e}})},[n,e.sub,e.email]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u(),{children:[(0,r.jsx)("title",{children:"Hiro Platform: Welcome"}),(0,r.jsx)("meta",{name:"description",content:"Welcome to the Hiro Platform!"})]}),(0,r.jsxs)(s.xu,{children:[(0,r.jsx)(s.kC,{w:"full",justify:"center",align:"center",h:"".concat(b.Mz,"px"),position:"fixed",top:"0",left:"0",right:"0",children:(0,r.jsx)(x.Z,{height:14})}),(0,r.jsx)(s.kC,{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",justify:"center",align:"center",color:"gray.100",fontSize:"sm",fontWeight:"bold",opacity:c&&j?"1":"0",transition:"opacity ".concat(1e3,"ms"),children:(0,r.jsx)(s.xu,{maxWidth:"80%",children:(0,r.jsx)("img",{alt:"Welcome to the Hiro Platform",src:"/images/hiro-logo-animated.gif",width:"600px"})})}),(0,r.jsxs)(s.kC,{opacity:j?"0":"1",transform:j?"scale(0.8)":"none",transition:"opacity ".concat(1e3,"ms, transform ").concat(1e3,"ms"),bg:"gray.600",borderRadius:"md",p:"12",maxW:"700px",mx:"auto",textAlign:"center",direction:"column",gap:"10",children:[(0,r.jsxs)(s.kC,{direction:"column",gap:"4",align:"center",children:[(0,r.jsx)(s.xu,{w:"60px",children:(0,r.jsx)("img",{src:R?"/images/postboxOpen.png":"/images/postbox.png",alt:"Mailbox"})}),(0,r.jsx)(s.X6,{size:"4",fontWeight:"light",children:"Do you want to accelerate your Web3 development?"}),(0,r.jsx)(s.xv,{color:"gray.300",fontFamily:"caption",fontSize:"md",children:"Stay up to date with learning resources, product updates and more."})]}),(0,r.jsxs)(s.kC,{direction:"column",gap:"4",align:"center",children:[(0,r.jsx)(o.zx,{onClick:_,disabled:S,variant:"primary",maxW:"350px",w:"50%",onMouseEnter:()=>{w(!0)},onMouseLeave:()=>{w(!1)},children:S?"Awesome, thanks!":"Yes, count me in"}),(0,r.jsx)(l(),{href:"/projects",passHref:!0,legacyBehavior:!0,children:(0,r.jsx)(o.zx,{variant:"link",as:"a",onClick:P,children:"Skip"})})]})]})]})]})},k=()=>(0,r.jsx)(p.Z,{children:(0,r.jsx)(j,{})});e.default=k},86046:function(t,e,n){t.exports=n(12297)},54581:function(t,e,n){"use strict";n.d(e,{D:function(){return d}});var r=n(70079),i=n(1023),s=n(44680),o=n(84993),a=n(32368),u=n(32513);class c extends u.l{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.client.defaultMutationOptions(t),(0,s.VS)(e,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){if(!this.listeners.length){var t;null==(t=this.currentMutation)||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();let e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let t=this.currentMutation?this.currentMutation.state:(0,o.R)(),e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){a.V.batch(()=>{if(this.mutateOptions){var e,n,r,i,s,o,a,u;t.onSuccess?(null==(e=(n=this.mutateOptions).onSuccess)||e.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(i=this.mutateOptions).onSettled)||r.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):t.onError&&(null==(s=(o=this.mutateOptions).onError)||s.call(o,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(a=(u=this.mutateOptions).onSettled)||a.call(u,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}t.listeners&&this.listeners.forEach(t=>{t(this.currentResult)})})}}var l=n(2912),h=n(35222);function d(t,e,n){let o=(0,s.lV)(t,e,n),u=(0,l.NL)({context:o.context}),[d]=r.useState(()=>new c(u,o));r.useEffect(()=>{d.setOptions(o)},[d,o]);let p=(0,i.$)(r.useCallback(t=>d.subscribe(a.V.batchCalls(t)),[d]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),f=r.useCallback((t,e)=>{d.mutate(t,e).catch(m)},[d]);if(p.error&&(0,h.L)(d.options.useErrorBoundary,[p.error]))throw p.error;return{...p,mutate:f,mutateAsync:p.mutate}}function m(){}}},function(t){t.O(0,[465,774,888,179],function(){return t(t.s=58097)}),_N_E=t.O()}]);