"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68],{78152:function(t,e,n){var r=n(35250),o=n(89598),a=n(89643),c=n(5769),i=n(48439),u=n(70079),s=n(30463),l=n(16811),d=n(55805);let f=t=>{let{children:e}=t,{query:n,isReady:f}=(0,i.useRouter)(),{error:p,error_description:v}=n,{logout:h,user:m}=(0,o.D3)();(0,u.useEffect)(()=>{m?s.av({id:m.sub,email:m.email}):s.av(null)},[m]);let x=(0,o.u3)(()=>(0,r.jsx)(r.Fragment,{children:e})),y=v&&v.includes("verify");if(!f)return null;let j=()=>{let t=(0,d.SV)();h({returnTo:"".concat(t,"?skipToLogin=true")})};return p?(0,r.jsx)(l.Z,{children:(0,r.jsxs)(a.kC,{direction:"column",gap:"6",children:[(0,r.jsxs)(a.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(a.xv,{textStyle:"subheading",color:"gray.300",children:y?"Welcome":"Something went wrong"}),(0,r.jsx)(a.X6,{size:"4",children:y?"Please verify your email":v})]}),y&&(0,r.jsx)(a.xv,{color:"gray.300",children:"Check your email and look for a message from the Hiro Platform. Follow the instructions to verify your email address."}),(0,r.jsx)(c.zx,{variant:"primary",onClick:j,children:"Log in again"})]})}):(0,r.jsx)(x,{})};e.Z=f},13821:function(t,e,n){n.d(e,{_i:function(){return s},bK:function(){return u}});var r=n(89072),o=n(70079),a=n(36898),c=n(55805),i=n(2989);let u=()=>{let{data:t}=(0,a.j)(),e=(0,o.useMemo)(()=>{let e=r.Z.create({baseURL:"".concat((0,c.kG)(),"/v1"),headers:{Authorization:t?"Bearer ".concat(t):""}});return e.interceptors.request.use(e=>t?(e.headers.Authorization="Bearer ".concat(t),e):Promise.reject(Error("Auth token is undefined, request not sent")),t=>{Promise.reject(t)}),e},[t]);return e},s=async(t,e,n)=>{let r;let o={headers:new Headers({"Content-Type":"application/json",Accept:"application/json",Authorization:(null==n?void 0:n.authToken)?"Bearer ".concat(n.authToken):""}),...e};try{if(!(r=await fetch(t,o)).ok)return await Promise.reject(r)}catch(o){let r=401===o.status;if(!r&&!(null==n?void 0:n.dontLogError)){let n;if("function"==typeof o.json)try{let t=await o.json();n=JSON.stringify(t)}catch(t){n=o.statusText?"".concat(o.status," ").concat(o.statusText):o}else n=o.statusText?"".concat(o.status," ").concat(o.statusText):o;(0,i.H)(o,"Requesting: ".concat((null==e?void 0:e.method)||"GET"," ").concat(t),{errorDetails:n})}throw o}return r.json()},l=t=>async(e,n,r,o)=>{let a={method:t,...r,body:JSON.stringify(n)};return s(e,a,o)};l("POST"),l("PUT"),l("PATCH")},2989:function(t,e,n){n.d(e,{H:function(){return a}});var r=n(95079),o=n(30463);function a(t,e,n){o.Tb(t,t=>(e&&t.setTransactionName(e),n&&t.setContext("app-context",n),t)),(0,r.eh)(t,e,n)}},85517:function(t,e,n){n.d(e,{e:function(){return r}});function r(t,e){let n={};return Object.keys(t).forEach(r=>{e.includes(r)&&(n[r]=t[r])}),n}},14751:function(t,e,n){n.d(e,{u:function(){return r}});function r(t){var e,n;return!!((null==t?void 0:t.status)==="running"&&(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.isPodUrlReady)&&(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.podUrl))}},38227:function(t,e,n){n.d(e,{Lv:function(){return d},Tm:function(){return s},hQ:function(){return u},zI:function(){return l}});var r=n(35250),o=n(82463),a=n(86099),c=n(32421),i=n(36349);let u=["pending","success_microblock"],s={pending:"In mempool",success:"Deployed",success_anchor_block:"Deployed",success_microblock:"Deployed (in microblock)",non_canonical:"Non-canonical (orphaned)",failed:"Failed"},l={pending:()=>(0,r.jsx)(o.$,{size:"sm"}),success:t=>(0,r.jsx)(i.Z,{color:t?"black":"stacksPurple"}),success_anchor_block:t=>(0,r.jsx)(i.Z,{color:t?"black":"stacksPurple"}),success_microblock:t=>(0,r.jsx)(i.Z,{color:t?"black":"stacksPurple"}),non_canonical:()=>(0,r.jsx)(a.JO,{as:c.baL}),failed:()=>(0,r.jsx)(a.JO,{as:c.baL})};function d(t){return(null==t?void 0:t.tx_status)==="pending"?"pending":(null==t?void 0:t.tx_status)==="success"&&t.is_unanchored?"success_microblock":(null==t?void 0:t.tx_status)!=="success"||t.is_unanchored?(null==t?void 0:t.tx_status)==="abort_by_response"||(null==t?void 0:t.tx_status)==="abort_by_post_condition"?"failed":null:t.canonical&&t.microblock_canonical?"success_anchor_block":"non_canonical"}},92626:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(70079);function o(t,e){let[n,o]=(0,r.useState)(!1),[a,c]=(0,r.useState)(0);return(0,r.useEffect)(()=>{!n&&t.current&&o(!0)}),(0,r.useEffect)(()=>{var e;n&&(null===(e=t.current)||void 0===e?void 0:e.clientHeight)&&a!==t.current.clientHeight&&c(t.current.clientHeight)},[n,t,a]),(0,r.useEffect)(()=>{c(t.current.clientHeight)},e),a}},37670:function(t,e,n){n.d(e,{Z:function(){return a}});var r=n(19491),o=n(70079);function a(){let t=(0,r.pm)({variant:"subtle",duration:4500,isClosable:!0,position:"bottom-left",containerStyle:{'button[aria-label="Close"]':{top:"auto"}}});return(0,o.useMemo)(()=>t,[])}},16811:function(t,e,n){var r=n(35250),o=n(89643);let a=t=>{let{children:e}=t;return(0,r.jsx)(o.kC,{className:"center-y",direction:"column",gap:"4",width:"80%",maxWidth:"448px",minWidth:"300px",bg:"gray.600",p:"8",borderRadius:"md",align:"center",mx:"auto",my:"auto",mt:"3",textAlign:"center",children:e})};e.Z=a},36349:function(t,e,n){var r=n(35250),o=n(89643),a=n(68680);let c=t=>{let{color:e}=t;return(0,r.jsx)(o.kC,{backgroundColor:e||"gray.900",p:"1",borderRadius:"xl",justify:"center",align:"center",w:"22px",h:"22px",children:(0,r.jsx)(a.Z,{color:"white"})})};e.Z=c},68845:function(t,e,n){var r=n(35250),o=n(89643),a=n(70079);let c=(0,a.forwardRef)((t,e)=>{let{children:n,...a}=t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.xu,{ref:e,position:"absolute",left:"24px",right:"24px",maxWidth:"8xl",mx:"auto",bg:"gray.900",py:"6",zIndex:"1",...a,children:n}),(0,r.jsx)(o.xu,{py:"6",opacity:0,"aria-hidden":!0,children:n})]})});e.Z=c},36898:function(t,e,n){n.d(e,{j:function(){return u},r:function(){return s}});var r=n(70079),o=n(41718),a=n(89598),c=n(19965),i=n(22676);function u(){let{getAccessTokenSilently:t,user:e}=(0,a.D3)();return(0,c.a)(["authToken",null==e?void 0:e.sub],()=>t(),{...i.y,staleTime:0,enabled:!!e})}function s(){let{data:t}=u();(0,r.useEffect)(()=>{let e=o.Z.get("token");t&&!e&&o.Z.set("access_token",t,{expires:2,domain:"hiro.so",path:"/",secure:!0,sameSite:"Strict"})},[t])}},31704:function(t,e,n){n.d(e,{Z:function(){return h}});var r=n(2912),o=n(61888),a=n(70079),c=n(13821),i=n(95884),u=n(66189),s=n(42343),l=n(38227);let d={[s.j.Mainnet]:"https://stacks-node-api.mainnet.stacks.co",[s.j.Testnet]:"https://stacks-node-api.testnet.stacks.co"},f=(t,e,n)=>n?["contractDeployStatus",t,e,n]:["contractDeployStatus",t,e];async function p(t,e,n){try{let r=await (0,c._i)("".concat(d[t],"/extended/v1/contract/").concat(e,".").concat(n),{},{dontLogError:!0});if(r.tx_id)return{contractName:n,txId:r.tx_id}}catch(t){}return{contractName:n}}async function v(t,e){return(0,c._i)("".concat(d[t],"/extended/v1/tx/").concat(e,"?unanchored=true"))}function h(t,e,n){var s;let h=(0,u.h)({queries:n.map(n=>({queryKey:f(t,e,n),queryFn:()=>p(t,e,n),refetchInterval:6e4,enabled:!!e,staleTime:1e4}))}),m=(0,o.mapValues)((0,o.keyBy)(h.map(t=>{let{data:e}=t;return e}),"contractName"),t=>null==t?void 0:t.txId),x=(0,o.values)(m).filter(t=>!!t),y=(0,u.h)({queries:x.map(e=>({queryKey:["transactionInfo",t,e],queryFn:()=>v(t,e),refetchInterval:t=>{let e=(0,l.Lv)(t);return l.hQ.includes(e)?1e4:6e4},staleTime:1e4}))}),j=(0,o.keyBy)(null===(s=null==y?void 0:y.filter(t=>{let{isSuccess:e}=t;return!!e}))||void 0===s?void 0:s.map(t=>{let{data:e}=t;return e}),"tx_id"),g=n.reduce((t,e)=>{let n=m[e];if(n){let r={...t,[e]:{txId:n,status:(0,l.Lv)(null==j?void 0:j[n])}};return r}return t},{}),{getPendingDeploys:b,addPendingDeploy:k,removePendingDeploy:_}=(0,a.useContext)(i.Z),S=(0,r.NL)(),T=()=>{S.invalidateQueries(f(t,e))},E=n=>{let r=setInterval(async()=>{try{let o=await (0,c._i)("".concat(d[t],"/extended/v1/contract/").concat(e,".").concat(n),{},{dontLogError:!0});o.tx_id&&(clearInterval(r),T(),_(t,n))}catch(t){}},1e4)},P=(e,n)=>{k(t,e,n),E(e)};return{contractsDeployDetails:{...b(t),...g},insertNewDeploy:P}}},6127:function(t,e,n){n.d(e,{x:function(){return c}});var r=n(19965),o=n(13821),a=n(14751);function c(){let t=(0,o.bK)(),{data:e,error:n}=(0,r.a)(["/pod/status"],()=>t.get("/pod/status").then(t=>t.data),{refetchInterval:t=>(0,a.u)(t)?1e4:1e3});return{podStatusData:e,podStatusError:n}}},37059:function(t,e,n){n.d(e,{Z:function(){return l}});var r=n(54581),o=n(70079),a=n(13821),c=n(2989),i=n(14751),u=n(6127),s=n(34124);function l(t){let e=(0,a.bK)(),{podStatusData:n}=(0,u.x)(),l=(0,o.useMemo)(()=>n,[n]),d=(0,s.N)(t),f=(0,o.useMemo)(()=>d,[d]),p=(0,r.D)({mutationFn:()=>e.post("/projects/".concat(t,"/upload")),onError:t=>{(0,c.H)(Error("Failed to upload project files"),"Project upload",{error:JSON.stringify(t)})}});(0,o.useEffect)(()=>{!(0,i.u)(l)||f||p.isLoading||p.isSuccess||p.mutate()},[l,f,p])}},34124:function(t,e,n){n.d(e,{N:function(){return i}});var r=n(19965),o=n(70079),a=n(13821),c=n(2989);function i(t){let e=(0,a.bK)(),[n,i]=(0,o.useState)(!1),{data:u,error:s}=(0,r.a)(["projects/pod/upload",t],()=>e.get("/projects/".concat(t,"/upload/status")).then(t=>t.data),{enabled:!n&&!!t,refetchInterval:1e3});return(0,o.useEffect)(()=>{(null==u?void 0:u.isProjectUploaded)&&i(null==u?void 0:u.isProjectUploaded),s&&(0,c.H)(Error("Error getting upload status"),"useUploadStatus",{error:JSON.stringify(s),projectId:t})},[u,s,t]),n}},81261:function(t,e,n){n.d(e,{Qs:function(){return m},PY:function(){return p},_0:function(){return x},Z0:function(){return v},dY:function(){return h}}),n(89598);var r=n(19965),o=n(2912),a=n(54581),c=n(61888),i=n(55805),u=n(13821),s=n(85517),l=n(36898),d=n(34124);let f=["name","templateUrl","archivedAt"];function p(t,e){let{data:n}=(0,l.j)();return(0,r.a)(["projects",n,t],()=>(0,u._i)("".concat((0,i.kG)(),"/v1/projects/").concat(t),{},{authToken:n}),{...e,enabled:!!n&&!!t})}function v(t,e){let{data:n}=(0,l.j)(),a=(0,o.NL)(),s=t?"?".concat(new URLSearchParams((0,c.mapValues)(t,t=>t.toString())).toString()):"";return(0,r.a)(["projects",n,s],()=>(0,u._i)("".concat((0,i.kG)(),"/v1/projects").concat(s),{},{authToken:n}),{...e,enabled:!!n,onSuccess:t=>{var r;t.forEach(t=>{a.setQueryData(["projects",n,t.id],t)}),null==e||null===(r=e.onSuccess)||void 0===r||r.call(e,t)}})}function h(t){let{data:e}=(0,l.j)(),n=(0,o.NL)();return(0,a.D)(t=>{let n=(0,s.e)(t,f);return(0,u._i)("".concat((0,i.kG)(),"/v1/projects/").concat(t.id),{method:"PATCH",body:JSON.stringify(n)},{authToken:e})},{...t,onSuccess:(r,o,a)=>{var c;n.invalidateQueries(["projects",e]),null==t||null===(c=t.onSuccess)||void 0===c||c.call(t,r,o,a)}})}function m(t){let{data:e}=(0,l.j)(),n=(0,o.NL)();return(0,a.D)(t=>(0,u._i)("".concat((0,i.kG)(),"/v1/projects"),{method:"POST",body:JSON.stringify(t)},{authToken:e}),{...t,onSuccess:(r,o,a)=>{var c;n.invalidateQueries(["projects",e]),null==t||null===(c=t.onSuccess)||void 0===c||c.call(t,r,o,a)}})}function x(t,e,n,o){var a,c;let i=(0,u.bK)(),{data:s}=(0,l.j)(),f=(0,d.N)(t);return(0,r.a)(["projectContracts",t,s],async()=>{var t;return i.get("".concat(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.podUrl,"/api/projects/").concat(n,"?&token=").concat(s)).then(t=>({data:t.data,status:t.status}))},{enabled:!!s&&!!t&&!!n&&!!(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.isPodUrlReady)&&!!(null==e?void 0:null===(c=e.data)||void 0===c?void 0:c.podUrl)&&!!f,staleTime:3e4,refetchInterval:t=>(null==t?void 0:t.status)===200?1e4:1e3,...o})}}}]);