<!DOCTYPE html>

<html lang="en">
<!--begin::Head-->
<head>
    <base href="/"/>
    <title>Coinnich</title>
    <meta charset="utf-8"/>
    <meta name="description"
          content=""/>
    <meta name="keywords"
          content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title"
          content=""/>
    <meta property="og:url" content="/"/>
    <meta property="og:site_name" content=""/>
    <link rel="canonical" href="/"/>
    <link rel="shortcut icon" th:href="@{/media/logos/favicon.ico}"/>
    <!--begin::Fonts(mandatory for all pages)-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700"/>
    <!--end::Fonts-->
    <!--begin::Global Stylesheets Bundle(mandatory for all pages)-->
    <link th:href="@{/plugins/global/plugins.bundle.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/css/style.bundle.css}" rel="stylesheet" type="text/css"/>
    <script th:src="@{/js/qrcode.min.js}"></script>
    <style>
        @media only screen and (max-width: 600px) {
            #qrcode {
                transform: scale(0.5);
            }
        }
    </style>
    <!--end::Global Stylesheets Bundle-->
</head>
<!--end::Head-->
<!--begin::Body-->
<body id="kt_body" class="app-blank">
<!--begin::Theme mode setup on page load-->
<script>var defaultThemeMode = "light";
var themeMode;
if (document.documentElement) {
    if (document.documentElement.hasAttribute("data-bs-theme-mode")) {
        themeMode = document.documentElement.getAttribute("data-bs-theme-mode");
    } else {
        if (localStorage.getItem("data-bs-theme") !== null) {
            themeMode = localStorage.getItem("data-bs-theme");
        } else {
            themeMode = defaultThemeMode;
        }
    }
    if (themeMode === "system") {
        themeMode = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
    }
    document.documentElement.setAttribute("data-bs-theme", themeMode);
}</script>
<!--end::Theme mode setup on page load-->
<!--begin::Root-->
<div class="d-flex flex-column flex-root" id="kt_app_root">
    <!--begin::Wrapper-->
    <div class="d-flex flex-column flex-column-fluid">

        <!--begin::Body-->
        <div class="scroll-y flex-column-fluid px-10 py-10" data-kt-scroll="true" data-kt-scroll-activate="true"
             data-kt-scroll-height="auto" data-kt-scroll-dependencies="#kt_app_header_nav" data-kt-scroll-offset="5px"
             data-kt-scroll-save-state="true"
             style="background-color:#D5D9E2; --kt-scrollbar-color: #d9d0cc; --kt-scrollbar-hover-color: #d9d0cc">
            <!--begin::Email template-->
            <style>html, body {
                padding: 0;
                margin: 0;
                font-family: Inter, Helvetica, "sans-serif";
            }

            a:hover {
                color: #009ef7;
            }</style>
            <div id="#kt_app_body_content"
                 style="background-color:#D5D9E2; font-family:Arial,Helvetica,sans-serif; line-height: 1.5; min-height: 100%; font-weight: normal; font-size: 15px; color: #2F3044; margin:0; padding:0; width:100%;">
                <div style="background-color:#ffffff; padding: 45px 0 34px 0; border-radius: 24px; margin:40px auto; max-width: 600px;">
                    <a href="/shop/backToShop" class="link-primary"> << Back to Shop List</a>
                    <table align="center" border="0" cellpadding="0" cellspacing="0" width="100%" height="auto"
                           style="border-collapse:collapse">
                        <tbody>
                        <tr>
                            <td align="center" valign="center" style="text-align:center; padding-bottom: 10px">
                                <!--begin:Email content-->
                                <div style="text-align:center; margin:0 60px 34px 60px">

                                    <!--begin:Logo-->
                                    <div style="margin-bottom: 10px">
                                        <a href="/" rel="noopener" target="_blank">
                                            <img alt="Logo" th:src="@{/media/logos/coinnich.svg}" style="height: 35px"/>
                                        </a>
                                    </div>
                                    <!--end:Logo-->
                                    <!--begin:Media-->
                                    <div style="display: flex; justify-content: center; align-items: center; ">
                                        <div style="margin-bottom: 15px; width: 100%; max-width: 200px; transform-origin: 0 0;" id="qrcode"></div>
                                    </div>


                                </div>
                                    <!--end:Media-->
                                    <!--begin:Text-->
                                    <div style="font-size: 14px; font-weight: 500; margin-bottom: 42px; font-family:Arial,Helvetica,sans-serif">
                                        <p style="margin-bottom:9px; color:#181C32; font-size: 22px; font-weight:700">
                                            Complete Your Payment</p>
                                        <p style="margin-bottom:2px; color:#7E8299">Please send <span id="amount" th:text="${amount + 2}"></span>USDT to the following wallet address:</p>
                                        <p style="margin-bottom:2px; color:#7E8299; font-weight: bolder" id="walletAddress" th:text="${walletAddress}"></p>
                                        <p style="margin-bottom:2px; color:#7E8299">You have <span id="timer" th:text="${timer}"></span> minutes to complete this transaction.</p>

                                    </div>
                                    <!--end:Text-->
                                    <!--begin:Order-->
                                    <div style="margin-bottom: 15px;margin-left: 15px;margin-right: 15px">
                                        <!--begin:Title-->
                                        <h3 style="text-align:left; color:#181C32; font-size: 18px; font-weight:600; margin-bottom: 22px">
                                            Order summary</h3>
                                        <!--end:Title-->
                                        <!--begin:Items-->
                                        <div style="padding-bottom:9px">
                                            <!--begin:Item-->
                                            <div style="display:flex; justify-content: space-between; color:#7E8299; font-size: 14px; font-weight:500; margin-bottom:8px">
                                                <!--begin:Description-->
                                                <div style="font-family:Arial,Helvetica,sans-serif">Staking amount
                                                </div>
                                                <!--end:Description-->
                                                <!--begin:Total-->
                                                <div style="font-family:Arial,Helvetica,sans-serif" >USDT<span th:text="${amount}"></span></div>
                                                <!--end:Total-->
                                            </div>
                                            <!--end:Item-->
                                            <!--begin:Item-->
                                            <div style="display:flex; justify-content: space-between; color:#7E8299; font-size: 14px; font-weight:500;">
                                                <!--begin:Description-->
                                                <div style="font-family:Arial,Helvetica,sans-serif">Transaction Fee </div>
                                                <!--end:Description-->
                                                <!--begin:Total-->
                                                <div style="font-family:Arial,Helvetica,sans-serif">USDT 2</div>
                                                <!--end:Total-->
                                            </div>
                                            <!--end:Item-->
                                            <!--begin::Separator-->
                                            <div class="separator separator-dashed" style="margin:15px 0"></div>
                                            <!--end::Separator-->
                                            <!--begin:Item-->
                                            <div style="display:flex; justify-content: space-between; color:#7E8299; font-size: 14px; font-weight:500">
                                                <!--begin:Description-->
                                                <div style="font-family:Arial,Helvetica,sans-serif">Total paid</div>
                                                <!--end:Description-->
                                                <!--begin:Total-->
                                                <div style="color:#50cd89; font-weight:700; font-family:Arial,Helvetica,sans-serif" >USDT<span th:text="${amount +2}"></span>

                                                </div>
                                                <!--end:Total-->
                                            </div>
                                            <!--end:Item-->
                                        </div>
                                        <!--end:Items-->
                                    </div>
                                    <!--end:Order-->

                                </div>
                                <!--end:Email content-->
                            </td>
                        </tr>
                        <tr>
                            <td align="center" valign="center"
                                style="font-size: 13px; text-align:center; padding: 0 10px 10px 10px; font-weight: 500; color: #A1A5B7; font-family:Arial,Helvetica,sans-serif">
                                <p style="color:#181C32; font-size: 16px; font-weight: 600; margin-bottom:9px">It’s all
                                    about customers!</p>
                                <p style="margin-bottom:2px">contact our customer care email: support@mlmfreya.com</p>
                                <p style="margin-bottom:4px">You may reach us at
                                    <a href="/contact us" rel="noopener" target="_blank"
                                       style="font-weight: 600">support</a>.</p>
                                <p>We serve Mon-Fri, 9AM-18AM</p>
                            </td>
                        </tr>
                        <tr>
                            <td align="center" valign="center" style="text-align:center; padding-bottom: 20px;">
                                <a href="#" style="margin-right:10px">
                                    <img alt="Logo" th:src="@{/media/email/icon-linkedin.svg}"/>
                                </a>
                                <a href="#" style="margin-right:10px">
                                    <img alt="Logo" th:src="@{/media/email/icon-dribbble.svg}"/>
                                </a>
                                <a href="#" style="margin-right:10px">
                                    <img alt="Logo" th:src="@{/media/email/icon-facebook.svg}"/>
                                </a>
                                <a href="#">
                                    <img alt="Logo" th:src="@{/media/email/icon-twitter.svg}"/>
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td align="center" valign="center"
                                style="font-size: 13px; padding:0 15px; text-align:center; font-weight: 500; color: #A1A5B7;font-family:Arial,Helvetica,sans-serif">
                                <p>&copy; Copyright Coinnich & Ferya.
                                    <a href="/" rel="noopener" target="_blank"
                                       style="font-weight: 600;font-family:Arial,Helvetica,sans-serif"></a></p>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--end::Email template-->
        </div>
        <!--end::Body-->
    </div>
    <!--end::Wrapper-->
</div>
<!--end::Root-->
<script>
    // Generate QR Code
    var qrcode = new QRCode(document.getElementById("qrcode"), {
        text: document.getElementById("walletAddress").innerText,
        width: 200,
        height: 200
    });


    // Countdown Timer
    var timeRemaining = parseInt(document.getElementById("timer").innerText);
    var timer = setInterval(function() {
        timeRemaining--;
        var minutes = Math.floor(timeRemaining / 60);
        var seconds = timeRemaining % 60;
        document.getElementById("timer").innerText = minutes + " minutes " + seconds + " seconds";
        if (timeRemaining <= 0) {
            clearInterval(timer);
            window.location.href = "/timeout"; // Redirect to timeout page
        }
    }, 1000); // Update every second


    // Check Wallet Status (you will need to replace this with your own code)
    var checkWalletStatus = setInterval(function() {
        // Get wallet address
        var walletAddress = document.getElementById("walletAddress").innerText;

        // Make API call to check wallet status
        fetch('/public/api/wallet/balance/' + walletAddress)
            .then(response => response.json())
            .then(data => {
                var balance = data;

                var amountElement = document.getElementById("amount");
                var requiredAmount = Number(amountElement.textContent);

                // Check if balance is sufficient
                if (parseFloat(balance/1000000) >= parseFloat(requiredAmount)) {
                    // If payment is received, clear intervals and redirect to confirmation page
                    clearInterval(timer);
                    clearInterval(checkWalletStatus);
                    window.location.href = "/dashboard";
                }
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    }, 50000); // Check every 5 seconds
</script>

<!--begin::Global Javascript Bundle(mandatory for all pages)-->
<script th:src="@{/plugins/global/plugins.bundle.js}"></script>
<script th:src="@{/js/scripts.bundle.js}"></script>
<!--end::Global Javascript Bundle-->
<!--end::Javascript-->
</body>
<!--end::Body-->
</html>