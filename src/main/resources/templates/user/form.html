<!-- user/form.html -->
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Add necessary CSS and scripts -->
</head>
<body>
<h1>Fill up the Form</h1>
<form id="registrationForm" action="/shop/checkout" method="POST">
    <!-- Add form fields for name, email, mobile number, wallet address, password, and confirm password -->
    <input type="text" name="name" placeholder="Name" required />
    <input id="email" type="email" name="email" placeholder="Email" required />
    <input type="text" name="mobileNumber" placeholder="Mobile Number" required />
    <input type="text" name="walletAddress" placeholder="Wallet Address" required />
    <input type="password" name="password" placeholder="Password" required />
    <input type="password" name="confirmPassword" placeholder="Confirm Password" required />
    <!-- user/form.html -->
    <!-- ... continued from above -->
    <button type="submit">Proceed to Payment</button>
</form>
<script>
    document.getElementById('registrationForm').addEventListener('submit', function(event) {
        event.preventDefault(); // prevent form from submitting
        const email = document.getElementById('email').value;
        fetch('/public/checkEmailUnique?email=' + email)
            .then(response => response.json())
            .then(isUnique => {
                if (isUnique) {
                    // Email is unique, submit the form
                    document.getElementById('registrationForm').submit();
                } else {
                    // Email is not unique, show an error message
                    alert('Email is already in use');
                }
            });
    });

</script>
</body>
</html>
